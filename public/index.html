<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Better Tent</title>
    <link rel="stylesheet" href="/style.css" />
  </head>

  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="brandRow">
            <svg class="brandLogo" viewBox="0 0 64 64" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
              <rect width="64" height="64" rx="14" fill="#19c51e"/>
              <path d="M8 52 L32 12 L56 52 Z" fill="none" stroke="#ffffff" stroke-width="5" stroke-linejoin="round"/>
              <path d="M32 12 L32 52" fill="none" stroke="#ffffff" stroke-width="4" stroke-linecap="round"/>
              <path d="M22 52 L32 34 L42 52" fill="none" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
            </svg>
            <div class="title">Better Tent</div>
          </div>
          <div class="subtitle">
            A better way to play <a class="sourceLink" href="https://www.puzzle-tents.com" target="_blank" rel="noopener">puzzle-tents.com</a>
            &nbsp;Â·&nbsp; Click: Tent â†’ Grass â†’ Empty &nbsp;Â·&nbsp; Right-click: Grass
          </div>
        </div>

        <div class="topControls">
          <div class="loadControls">
            <label class="field">
              <span>Puzzle ID</span>
              <input id="pid" placeholder="e.g. 6008187" value="6008187" />
            </label>

            <label class="field">
              <span>Board</span>
              <select id="size">
                <option value="0">6Ã—6 Easy</option>
                <option value="1">6Ã—6 Hard</option>
                <option value="2">8Ã—8 Easy</option>
                <option value="3">8Ã—8 Hard</option>
                <option value="4">10Ã—10 Easy</option>
                <option value="5">10Ã—10 Hard</option>
                <option value="6">15Ã—15 Easy</option>
                <option value="7">15Ã—15 Hard</option>
              </select>
            </label>

            <button id="load" type="button">Load</button>
          </div>

          <div class="toggles">
            <button id="hintBtn" class="ghost" type="button" title="Get a hint">Hint</button>
            <button id="solveBtn" class="ghost" type="button" title="Solve the puzzle">Solve</button>

            <button id="undo" class="ghost" type="button" title="Undo (Ctrl/Cmd+Z)">Undo</button>
            <button id="redo" class="ghost" type="button" title="Redo (Ctrl/Cmd+Y)">Redo</button>

            <button
              id="autoGrass"
              class="ghost"
              type="button"
              title="Auto place grass where a tent is impossible"
            >
              Auto grass
            </button>

            <button id="coords" class="ghost" type="button" title="Toggle coordinates">
              Coords
            </button>

            <div class="themeToggle">
              <span class="tlabel">Dark</span>
              <button id="themeBtn" class="switch" type="button" aria-label="Toggle theme">
                <span class="knob"></span>
              </button>
              <span class="tlabel">Light</span>
            </div>
          </div>
        </div>
      </header>

      <section class="statusbar">
        <div id="status" class="status">Ready.</div>

        <!-- Legend + Customize -->
        <div class="legend legendUpgraded">
          <div class="legendItem">
            <span class="legendPreview tile" id="legendTree" aria-label="Tree"></span>
            <span class="legendLabel">TREE</span>
          </div>
          <div class="legendItem">
            <span class="legendPreview tile" id="legendTent" aria-label="Tent"></span>
            <span class="legendLabel">TENT</span>
          </div>
          <div class="legendItem">
            <span class="legendPreview tile" id="legendGrass" aria-label="Grass"></span>
            <span class="legendLabel">GRASS</span>
          </div>

          <button id="customize" class="ghost" type="button" title="Customize colors">
            Customize
          </button>
        </div>
      </section>

      <!-- Palette editor popover -->
      <div id="palettePopover" class="popover" style="display:none" role="dialog" aria-label="Palette">
        <div class="popoverArrow"></div>

        <section id="palette" class="palette">
          <div class="paletteHeader">
            <div class="paletteTitle">Palette</div>
            <button id="paletteClose" class="ghost" type="button" aria-label="Close palette">Close</button>
          </div>

          <div class="paletteBody">
            <div class="paletteGrid">
              <button class="paletteCard" data-target="tree" id="cardTree" type="button">
                <div class="paletteCell tile" id="paletteTree"></div>
                <div class="paletteLabel">TREE</div>
              </button>

              <button class="paletteCard" data-target="tent" id="cardTent" type="button">
                <div class="paletteCell tile" id="paletteTent"></div>
                <div class="paletteLabel">TENT</div>
              </button>

              <button class="paletteCard" data-target="grass" id="cardGrass" type="button">
                <div class="paletteCell tile" id="paletteGrass"></div>
                <div class="paletteLabel">GRASS</div>
              </button>
            </div>

            <div class="pickerPanel" id="pickerPanel">
              <div class="pickerRow" id="rowTreeCanopy">
                <label for="pickTreeCanopy">Canopy</label>
                <input type="color" id="pickTreeCanopy" />
              </div>

              <div class="pickerRow" id="rowTreeTrunk">
                <label for="pickTreeTrunk">Trunk</label>
                <input type="color" id="pickTreeTrunk" />
              </div>

              <div class="pickerRow" id="rowSpriteStroke">
                <label for="pickSpriteStroke">Outline</label>
                <input type="color" id="pickSpriteStroke" />
              </div>

              <div class="pickerRow" id="rowTentStroke">
                <label for="pickTentStroke">Tent</label>
                <input type="color" id="pickTentStroke" />
              </div>

              <div class="pickerRow" id="rowTile">
                <label for="pickTile">Tile/Grass</label>
                <input type="color" id="pickTile" />
                <div class="pickerHint">Grass is kept light automatically.</div>
              </div>

              <div class="pickerFooter">
                <button id="resetPalette" class="ghost" type="button">Reset</button>
                <div class="pickerHint rightHint">Saved automatically.</div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <main class="stage">
        <div id="mount"></div>
      </main>
    </div>

    <!-- Celebration overlay -->
    <div id="celebrate" class="celebrate" style="display:none" aria-live="polite">
      <canvas id="confetti"></canvas>
      <div class="celebrateCard">
        <div class="celebrateTitle">CONGRATULATIONS ðŸŽ‰</div>
        <div class="celebrateText">You solved it.</div>
        <button id="celebrateClose" class="ghost" type="button">Nice</button>
      </div>
    </div>

    <!-- Solver attaches window.TentsSolver -->
    <script src="/solver.js"></script>

    <!-- Modular app entry -->
    <script type="module" src="/js/main.js"></script>
  </body>
</html>
